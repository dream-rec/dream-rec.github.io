# ä½¿ç”¨ x-ui æ­å»º Trojan(å¯æ›¿æ¢å…¶ä»–ç±»å‹) WS TLS èŠ‚ç‚¹

**å‘å¸ƒæ—¶é—´**: May 27, 2025

## ğŸŒ æ—¥å¿—ï¼šä½¿ç”¨ x-ui æ­å»º Trojan TLS èŠ‚ç‚¹ï¼ˆå«åŸŸåè¯ä¹¦é…ç½®ï¼‰

**é¢æ¿å·¥å…·**ï¼š[https://raw.githubusercontent.com/vaxilu/x-ui/master/install.sh]
**ç›®æ ‡åŸŸå**ï¼š`us.example.com`

---

## ğŸ§© ç¬¬ä¸€æ­¥ï¼šæ›´æ–°ç³»ç»Ÿã€å®‰è£…è¯ä¹¦å·¥å…·

```bash
sudo apt update
sudo apt install certbot python3-certbot-nginx -y
```

> è¯´æ˜ï¼š`certbot` ç”¨äºç­¾å‘ Let's Encrypt è¯ä¹¦ï¼Œ`python3-certbot-nginx` æ’ä»¶è®©å®ƒèƒ½è‡ªåŠ¨é…ç½® Nginxã€‚

---

## ğŸŒ ç¬¬äºŒæ­¥ï¼šä¸ºåŸŸåç”³è¯· HTTPS è¯ä¹¦

```bash
sudo certbot --nginx -d us.example.com
```

> **é‡è¦æé†’**ï¼š
> - è¯·ç¡®ä¿ä½ çš„åŸŸåå·²ç»è§£æåˆ°å½“å‰ VPS å…¬ç½‘ IPï¼ŒDNSæ·»åŠ Aè®°å½•æŒ‡å‘å…¬ç½‘IPV4åœ°å€ã€‚
> - è¯·ç¡®ä¿æœåŠ¡å™¨çš„ 80 å’Œ 443 ç«¯å£å·²å¼€æ”¾ã€‚éƒ¨åˆ† VPS æä¾›å•†è¦æ±‚ä¸ä»…åœ¨ç³»ç»Ÿå†…éƒ¨ï¼ˆå¦‚é€šè¿‡ ufw æˆ– firewalldï¼‰æ”¾è¡Œç«¯å£ï¼Œè¿˜éœ€åœ¨äº‘å¹³å°çš„ VPC ç½‘ç»œå®‰å…¨ç»„ æˆ– é˜²ç«å¢™ç­–ç•¥ ä¸­æ‰‹åŠ¨æ·»åŠ ç›¸åº”çš„å…¥ç«™è§„åˆ™ï¼Œå¦åˆ™å¤–éƒ¨è®¿é—®å¯èƒ½è¢«é˜»æ–­ã€‚
> - å¦‚æœç”³è¯·æˆåŠŸï¼Œè¯ä¹¦å’Œå¯†é’¥é»˜è®¤ä¿å­˜åœ¨ï¼š  
>   `/etc/letsencrypt/live/us.example.com/fullchain.pem`  
>   `/etc/letsencrypt/live/us.example.com/privkey.pem`

---

## âš™ï¸ ç¬¬ä¸‰æ­¥ï¼šå®‰è£… Trojan å¤šåè®®é¢æ¿ x-ui

```bash
bash <(curl -Ls https://raw.githubusercontent.com/vaxilu/x-ui/master/install.sh)
```

å®‰è£…å®Œæˆåï¼Œè¿è¡Œï¼š

```bash
x-ui
```

é»˜è®¤ç®¡ç†é¢æ¿åœ°å€ï¼š`http://ä½ çš„æœåŠ¡å™¨IP:54321`ï¼Œé¦–æ¬¡è¿›å…¥éœ€è®¾ç½®ç”¨æˆ·åå’Œå¯†ç ã€‚

---

## ğŸ” ç¬¬å››æ­¥ï¼šæ·»åŠ  Trojan èŠ‚ç‚¹é…ç½®ï¼ˆWebSocket + TLSï¼‰

æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® x-ui ç®¡ç†é¢æ¿ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„å…¥ç«™é…ç½®ï¼Œå»ºè®®é€‰æ‹© **Trojan ç±»å‹**ã€‚

### åŸºæœ¬è®¾ç½®ï¼š

- **å…¥ç«™ç±»å‹**ï¼šTrojanï¼ˆæ”¯æŒ TLSï¼‰
- **ç«¯å£**ï¼šå»ºè®®ä½¿ç”¨ `443`ã€`8443` æˆ–å…¶ä»–è‡ªå®šä¹‰ç«¯å£ï¼ŒCFæ”¯æŒçš„HTTPSç«¯å£
- **SNIï¼ˆServer Name Indicationï¼‰**ï¼šå¡«å†™ä½ çš„åŸŸåï¼Œä¾‹å¦‚ `us.example.com`
- **å¯†ç ï¼ˆPasswordï¼‰**ï¼šç”¨æˆ·è¿æ¥æ‰€éœ€çš„è®¤è¯å¯†ç ï¼Œè‡ªè¡Œè®¾ç½®ï¼ŒåŠ¡å¿…ä¿å¯†
- **è¯·æ±‚å¤´**ï¼šæ·»åŠ HOSTç±»å‹ï¼Œå€¼å¯¹åº”åŸŸåus.example.comï¼Œä¸‹ä¾§åŸŸååŒç†

### è¯ä¹¦é…ç½®ï¼š

**è¯ä¹¦æ–‡ä»¶è·¯å¾„**ï¼š
```
/etc/letsencrypt/live/us.example.com/fullchain.pem
```

**ç§é’¥æ–‡ä»¶è·¯å¾„**ï¼š
```
/etc/letsencrypt/live/us.example.com/privkey.pem
```

### å…¶ä»–å¯é€‰é¡¹ï¼š

- âœ… å¯ç”¨ TLSï¼ˆå¿…é¡»å‹¾é€‰ï¼‰
- âœ… å¯é€‰å¯ç”¨ï¼š
  - WebSocketï¼ˆæ›´å¼ºçš„æ··æ·†æ€§ï¼‰
  - Realityï¼ˆæ— éœ€è¯ä¹¦çš„æ–°åè®®ï¼Œé€‚åˆå¯¹æŠ— DPIï¼‰
  - gRPCï¼ˆæŸäº›è®¾å¤‡è¡¨ç°æ›´ä½³ï¼‰


## ğŸ“¦ ç¬¬äº”æ­¥ï¼šå®¢æˆ·ç«¯è¿æ¥

å¯¼å‡ºé…ç½®ï¼ˆäºŒç»´ç æˆ– JSONï¼‰ï¼Œå¯¼å…¥åˆ°ï¼š

- **Windows**: V2RayN / NGUI
- **iOS**: Shadowrocket / Kitsunebi
- **Android**: v2rayNG / Clash Meta

ç¡®ä¿å®¢æˆ·ç«¯ä½¿ç”¨åŸŸåè¿æ¥ï¼Œå¯ç”¨ TLSï¼ŒéªŒè¯ SNI å­—æ®µä¸€è‡´ã€‚

---

## ğŸ” ç¬¬å…­æ­¥ï¼šè¯ä¹¦è‡ªåŠ¨ç»­æœŸ

certbot é»˜è®¤è‡ªåŠ¨ç»­æœŸï¼Œä½ å¯ä»¥æ‰‹åŠ¨æµ‹è¯•ï¼š

```bash
sudo certbot renew --dry-run
```

---

## âœ… æ€»ç»“

| å·¥å…· | ä½œç”¨ |
|------|------|
| `certbot` | å…è´¹ HTTPS è¯ä¹¦ |
| `x-ui` | å¯è§†åŒ–ç®¡ç† Trojan / VLESS ç­‰åè®® |
| `nginx` | ç”¨äºè¯ä¹¦ç”³è¯·ï¼Œä¸å‚ä¸ä»£ç†åŠŸèƒ½ |
| `Let's Encrypt` | æä¾› 90 å¤©æœ‰æ•ˆæœŸå…è´¹è¯ä¹¦ |

